!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return n={},t.m=e=[function(t,e,n){(function(t){Object.defineProperty(e,"u",{value:!0});var r=n(4),i=n(5);n(1).Promise.doPolyFill(),e.stopWords=["a","about","after","all","also","am","an","and","andor","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","had","has","have","he","her","here","him","himself","his","how","i","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your"],e.f=function(t){return t?JSON.parse(JSON.stringify(t)):null},e.splitArr=function(t,e){for(var n=t.length%e,r=n,i=Math.floor(t.length/e),o=[],s=0;s<t.length;s+=i){var a=i+s,u=!1;0!=n&&r&&(a++,r--,u=!0),o.push(t.slice(s,a)),u&&s++}return o},e.fastCHAIN=function(t,n){return new Promise(function(r,i){if(t&&t.length){var o=[],s=!1,a=function(){if(o.length<t.length)n(t[o.length],o.length,function(t){o.push(t),o.length%100==0?e.setFast(a):a()},function(t){s=!0,i(t)});else{if(s)return;r(o)}};a()}else r([])})},e.fastRACE=function(t,e){return new Promise(function(n,r){if(t&&t.length){var i=!1,o=0,s=function(){o<t.length&&(e(t[o],o,function(t){i||(i=!0,n([t]))},function(t){i||(i=!0,r(t))}),o++,s())};s()}else n([])})},e.fastALL=function(t,e){return Promise.all((t||[]).map(function(t,n){return new Promise(function(r,i){e(t,n,r,i)})}))};var o="undefined"==typeof window?"":navigator.userAgent||"";e.isSafari=0!==o.length&&(/^((?!chrome|android).)*safari/i.test(o)||/iPad|iPhone|iPod/.test(o)&&!window.MSStream),e.isMSBrowser=0!==o.length&&(0<o.indexOf("MSIE ")||0<o.indexOf("Trident/")||0<o.indexOf("Edge/")),e.isAndroid=/Android/.test(o),e.random16Bits=function(){if("undefined"==typeof crypto)return Math.round(Math.random()*Math.pow(2,16));if(crypto.getRandomValues){var e=new Uint16Array(1);return crypto.getRandomValues(e),e[0]}return void 0!==t&&t.a.randomBytes?t.a.randomBytes(2).reduce(function(t,e){return e*t}):Math.round(Math.random()*Math.pow(2,16))},e.tokenizer=function(t,n,o,s,a){function u(t){return!t||1===String(t).length||-1!==e.stopWords.indexOf(t)}var c=(s||"").toLowerCase().replace(/(\d+)\/(\d+)|(?:\d+(?:,\d+)*|\d+)(?:\.\d+)?/gim,function(t,e,n){return e||n?(parseInt(e)/parseInt(n)).toFixed(a||4):parseFloat(t.replace(/\,/gim,"")).toFixed(a||4)}).replace(/\-|\_|\[|\]|\(|\)|\{|\}|\r?\n|\r|\t/gim," ").replace(/[^\w\s]|(\d\.)/gim,"$1").replace(/\s+/g," ").split(" ");switch(o[1]){case"english":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":r(i(t)):t}});case"english-stem":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":i(t):t}});case"english-meta":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":r(t):t}})}return c.map(function(t,e){return{o:t,w:t,i:e}})},e.timeid=function(t){for(var n=Math.round((new Date).getTime()/(t?1:1e3)).toString();n.length<(t?13:10);)n="0"+n;return n+"-"+(e.random16Bits()+e.random16Bits()).toString(16)},e.intersect=function(t,e){return!(!t||!e)&&!(!t.length||!e.length)&&0<(t||[]).filter(function(t){return-1!==(e||[]).indexOf(t)}).length},e.uuid=function(){var t,n,r="";return[r,r,r,r,r,r,r,r].reduce(function(i,o,s){for(t=e.random16Bits(),n=3===s?4:4===s?(t%16&3|8).toString(16):r,t=t.toString(16);t.length<4;)t="0"+t;return i+(-1<[2,3,4,5].indexOf(s)?"-":r)+(n+t).slice(0,4)},r)},e.hash=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString(16)};var s={int:function(t){return t},uuid:e.uuid,timeId:function(){return e.timeid()},timeIdms:function(){return e.timeid(!0)}};e.generateID=function(t,e){return s[t]?s[t](e||1):""},e.cleanArgs=function(t,n){for(var r={},i=t.length;i--;){var o=t[i].split(":");1<o.length?r[o[0]]=e.cast(o[1],n[o[0]]||void 0):r[o[0]]=n[o[0]]||void 0}return r},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.cast=function(t,n){if("any"===t||"blob"===t)return n;var r=typeof n;if("undefined"==r||null===n)return n;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},o=function(t,n){switch(t){case"safestr":return o("string",n).replace(/[&<>"'`=\/]/gim,function(t){return i[t]});case"int":return"number"!=r||n%1!=0?parseInt(n||0):n;case"number":case"float":return"number"!=r?parseFloat(n||0):n;case"any[]":case"array":return Array.isArray(n)?n:[];case"uuid":case"timeId":case"timeIdms":case"string":return"string"!=r?String(n):n;case"object":case"obj":case"map":return e.isObject(n)?n:{};case"boolean":case"bool":return!0===n}return n},s=o(String(t||"").toLowerCase(),n);if(-1===t.indexOf("[]"))return void 0!==s?-1<["int","float","number"].indexOf(t)&&isNaN(s)?0:s:void 0;var a=t.slice(0,t.lastIndexOf("[]"));return(n||[]).map(function(t){return e.cast(a,t)})},e.binarySearch=function(t,n,r,i){var o=r||0,s=i||t.length;if(t[o]>n)return o;if(t[s]<n)return s+1;var a=Math.floor((o+s)/2);return n===t[a]?a:s-1===o?s:n>t[a]?e.binarySearch(t,n,a,s):n<t[a]?e.binarySearch(t,n,o,a):s},e.resolvePath=function(t){if(!t)return[];if(c[t])return c[t].slice();var e=-1!==t.indexOf("[")?t.split(/\.|\[/gim).map(function(t){return t.replace(/\]/gim,"")}):t.split(".");return c[t]=e,c[t].slice()},e.noop=function(){};var a=(u.prototype.h=function(){var t=this;if(!this.v){if(this.y&&!this.b.length)return this.v=!0,void(this.onComplete&&this.onComplete());if(this.b.length){function n(){t.T++,t.T%100==0?e.setFast(t.h):t.h()}var r=this.b.shift()||[];r[1]?r[1](r[0],n,this.onError?this.onError:e.noop):this.processItem&&this.processItem(r[0],this.T,n,this.onError?this.onError:e.noop)}else this.S=!1}},u.prototype.finished=function(){this.y=!0,this.v||this.S||this.b.length||(this.v=!0,this.onComplete&&this.onComplete())},u.prototype.newItem=function(t,e){this.b.push([t,e]),this.S||(this.S=!0,this.h())},u);function u(t,e,n){this.processItem=t,this.onError=e,this.onComplete=n,this.b=[],this.S=!1,this.y=!1,this.T=0,this.v=!1,this.h=this.h.bind(this)}e.O=a,e.deepGet=function(t,n){var r=function(t,e,n){return t[e]&&n?r(t,e+1,n[t[e]]):n};return r(Array.isArray(t)?t:e.resolvePath(t),0,n)},e.deepFreeze=function(t){return Object.getOwnPropertyNames(t||{}).forEach(function(n){var r=t[n];"object"==typeof r&&null!==r&&(t[n]=e.deepFreeze(r))}),Object.freeze(t)},e.crowDistance=function(t,e,n,r,i){function o(t){return t*(Math.PI/180)}void 0===i&&(i=6371);var s=o(n-t),a=o(r-e),u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o(t))*Math.cos(o(n))*Math.sin(a/2)*Math.sin(a/2);return i*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))};var c={};function f(t){return t[0].apply(null,d.call(t,1))}e.objQuery=function(t,e,n){var r=function(t,e,n){return t[e]&&n?r(t,e+1,n[t[e]]):n},i=t+(n?"1":"0");if(c[i])return r(c[i],0,e);var o=[];if(o=-1<t.indexOf("[")?[].concat.apply([],t.split(".").map(function(t){return t.match(/([^\[]+)|\[([^\]]+)\]\[/gim)||t})).map(function(t){return t.replace(/\[|\]/gim,"")}):t.split("."),n){var s=o.shift()+"."+o.shift();o.unshift(s)}return c[i]=o,r(c[i],0,e)};var h=0,l={},d=Array.prototype.slice,p="setMsg",y="undefined"!=typeof window&&window.postMessage&&window.addEventListener;y&&window.addEventListener("message",function(t){var e,n=t.data;"string"==typeof n&&0===n.indexOf(p)&&(e=l[n])&&(delete l[n],f(e))}),e.setFast=y?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=h++,r=p+n;return l[r]=t,window.postMessage(r,"*"),n}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];setTimeout(function(){f(t)},0)}}).call(this,n(2))},function(t,e,n){"use strict";(function(t){function n(t){return t[0].apply(null,o.call(t,1))}Object.defineProperty(e,"u",{value:!0});var r=0,i={},o=Array.prototype.slice,s="undefined"!=typeof window&&window.postMessage&&window.addEventListener;function a(){}s&&window.addEventListener("message",function(t){var e,r=t.data;"string"==typeof r&&0===r.indexOf("setMsg")&&(e=i[r])&&(delete i[r],n(e))}),e.setFast=s?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r++,o="setMsg"+n;return i[o]=t,window.postMessage(o,"*"),n}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];setTimeout(function(){n(t)},0)};var u=["R"],c=["F"],f=["P"],h=(l.doPolyFill=function(){void 0!==t&&(t.Promise||(t.Promise=this)),"undefined"!=typeof window&&(window.Promise||(window.Promise=this))},l.prototype.catch=function(t){return this.then(function(){},t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.M===c||"function"!=typeof e&&this.M===u)return this;var n=new l(a);return this.M!==f?y(n,this.M===c?t:e,this.k):this.j.push(new d(n,t,e)),n},l.resolve=function(t){return t instanceof this?t:m.I(new l(a),t)},l.reject=function(t){return m._(new l(a),t)},l.all=function(t){return new l(function(e,n){var r=[];if(t.length)for(var i=function(n,i,o){void 0!==o?r.push(o):r.push(i),r.length==t.length&&e(r)},o=0;o<t.length;o++)t[o].then(function(t){i(0,t,void 0)}).catch(function(t){i(0,void 0,t)});else e([])})},l.race=function(t){var e,n=t.length,r=!1,i=-1,o=new l(a);if(!1!==Array.isArray(t))return this.reject(new TypeError);if(!n)return this.resolve([]);for(;++i<n;)e=t[i],this.resolve(e).then(function(t){r||(r=!0,m.I(o,t))},function(t){r||(r=!0,m._(o,t))});return o},l);function l(t){this.M=f,this.j=[],this.k=void 0,t!==a&&w(this,t)}e.Promise=h;var d=(p.prototype.R=function(t){m.I(this.N,t)},p.prototype.P=function(t){y(this.N,this.A,t)},p.prototype.x=function(t){m._(this.N,t)},p.prototype.F=function(t){y(this.N,this.D,t)},p);function p(t,e,n){this.N=t,"function"==typeof e&&(this.A=e,this.R=this.P),"function"==typeof n&&(this.D=n,this.x=this.F)}function y(t,n,r){e.setFast(function(){var e;try{e=n.apply(null,r)}catch(e){return m._(t,e)}return e===t?m._(t,new TypeError):m.I(t,e),null})}e.J=d;var m=(g.I=function(t,e){var n=b(v,e),r=n.$,i=-1,o=t.j.length;if("error"===n.L)return g._(t,n.$);if(r)w(t,r);else for(t.M=c,t.k=e;++i<o;)t.j[i].R(e);return t},g._=function(t,e){t.M=u,t.k=e;for(var n=-1,r=t.j.length;++n<r;)t.j[n].x(e);return t},g);function g(){}function v(t){var e=t&&t.then;return!t||"object"!=typeof t&&"function"!=typeof t||"function"!=typeof e?null:function(){e.apply(t,arguments)}}function w(t,e){var n=!1;function r(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n||(n=!0,m._(t,e))}function i(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n||(n=!0,m.I(t,e))}var o=b(function(){e(i,r)});"error"===o.L&&r(o.$)}function b(t,e){var n={L:null,$:null};try{n.$=t(e),n.L="success"}catch(t){n.L="error",n.$=t}return n}}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"u",{value:!0});var r=n(0),i=(o.prototype.clone=function(t){this.H&&!t&&this.H(this.C,"drop",null);var e=new o;return e.doAI=this.doAI,e.ai=this.ai,e.sortIndex=this.sortIndex,e.H=this.H,e.C=this.C,e.pkType=this.pkType,t&&this.set([]),e},o.prototype.onChange=function(t,e){this.C=t,this.H=e},o.prototype.set=function(t){var e=this;this.K=t||[],this.z={},this.K.forEach(function(t,n){e.z[String(t)]=!0}),this.doAI&&this.K.length&&(this.ai=this.K[this.K.length-1]+1)},o.prototype.getLocation=function(t,e){var n=this.indexOf(t);return-1!==n?n:this.sortIndex?r.binarySearch(this.K,t,e):r.binarySearch(this.K.sort(function(t,e){return e<t?1:-1}),t,e)},o.prototype.add=function(t,e){if(!this.z[String(t)])if(this.H&&!e&&this.H(this.C,"add",t),this.z[String(t)]=!0,e&&-1!==["number","int","float"].indexOf(this.pkType)&&(t=parseFloat(t)),this.doAI)this.ai++,this.K.push(t);else if(this.sortIndex){var n=r.binarySearch(this.K,t);this.K.splice(n,0,t)}else this.K.push(t)},o.prototype.keys=function(){return this.K},o.prototype.exists=function(t){return!!this.z[String(t)]},o.prototype.indexOf=function(t){return this.z[String(t)]?this.sortIndex?r.binarySearch(this.K,t):this.K.indexOf(t):-1},o.prototype.remove=function(t,e){if(this.H&&!e&&this.H(this.C,"rm",t),e&&-1!==["number","int","float"].indexOf(this.pkType)&&(t=parseFloat(t)),this.z[String(t)]){var n=this.indexOf(t);this.z[String(t)]=!1,this.K.splice(n,1)}},o);function o(){this.K=[],this.z={},this.ai=1,this.sortIndex=!0,this.doAI=!1}e.DatabaseIndex=i,e.syncPeerIndex=function(t,e){t.peerMode&&(Object.keys(e).forEach(function(n){e[n].onChange(n,function(e,n,i){t.peers.filter(function(e){return e!==t.pid}).forEach(function(t){localStorage.setItem(t+"::"+r.random16Bits().toString(16),n+","+e+","+(i||""))})})}),window.addEventListener("storage",function(n){if(n.key&&-1!==n.key.indexOf(t.pid+"::")){var r=(n.newValue||"").split(",");switch(localStorage.removeItem(n.key),r[0]){case"rm":e[r[1]].remove(r[2],!0);break;case"add":e[r[1]].add(r[2],!0);break;case"drop":e[r[1]].clone(!0)}}}))}},function(t,e,n){"use strict";t.exports=function(t){var e,n,f,h,l="",d=0;function p(t){l+=t}function y(e){return t.charAt(d+e).toUpperCase()}function m(t){return function(){return y(t)}}if(!(t=String(t||"")))return"";for(n=m(1),f=m(0),h=m(-1);!c(f());){if(!f())return"";d++}switch(f()){case"A":"E"===n()?(p("E"),d+=2):(p("A"),d++);break;case"G":case"K":case"P":"N"===n()&&(p("N"),d+=2);break;case"W":"R"===n()?(p(n()),d+=2):"H"===n()?(p(f()),d+=2):a(n())&&(p("W"),d+=2);break;case"X":p("S"),d++;break;case"E":case"I":case"O":case"U":p(f()),d++}for(;f();)if(e=1,!c(f())||f()===h()&&"C"!==f())d+=e;else{switch(f()){case"B":"M"!==h()&&p("B");break;case"C":s(n())?"I"===n()&&"A"===y(2)?p(r):"S"!==h()&&p("S"):"H"===n()?(p(r),e++):p("K");break;case"D":"G"===n()&&s(y(2))?(p("J"),e++):p("T");break;case"G":"H"===n()?o(y(-3))||"H"===y(-4)||(p("F"),e++):"N"===n()?!c(y(2))||"E"===y(2)&&"D"===y(3)||p("K"):s(n())&&"G"!==h()?p("J"):p("K");break;case"H":a(n())&&!u(h())&&p("H");break;case"K":"C"!==h()&&p("K");break;case"P":"H"===n()?p("F"):p("P");break;case"Q":p("K");break;case"S":"I"!==n()||"O"!==y(2)&&"A"!==y(2)?"H"===n()?(p(r),e++):p("S"):p(r);break;case"T":"I"!==n()||"O"!==y(2)&&"A"!==y(2)?"H"===n()?(p(i),e++):"C"===n()&&"H"===y(2)||p("T"):p(r);break;case"V":p("F");break;case"W":a(n())&&p("W");break;case"X":p("KS");break;case"Y":a(n())&&p("Y");break;case"Z":p("S");break;case"F":case"J":case"L":case"M":case"N":case"R":p(f())}d+=e}return l};var r="X",i="0";function o(t){return"B"===(t=f(t))||"D"===t||"H"===t}function s(t){return"E"===(t=f(t))||"I"===t||"Y"===t}function a(t){return"A"===(t=f(t))||"E"===t||"I"===t||"O"===t||"U"===t}function u(t){return"C"===(t=f(t))||"G"===t||"P"===t||"S"===t||"T"===t}function c(t){var e=function(t){return f(t).charCodeAt(0)}(t);return 65<=e&&e<=90}function f(t){return String(t).charAt(0).toUpperCase()}},function(t,e,n){"use strict";t.exports=function(t){var e,n;return(t=String(t).toLowerCase()).length<3?t:(121===t.charCodeAt(0)&&(e=!0,t="Y"+t.substr(1)),I.test(t)?t=t.substr(0,t.length-2):b.test(t)&&(t=t.substr(0,t.length-1)),(n=w.exec(t))?u.test(n[1])&&(t=t.substr(0,t.length-1)):(n=g.exec(t))&&h.test(n[1])&&(t=n[1],v.test(t)?t+="e":x.test(t)?t=t.substr(0,t.length-1):l.test(t)&&(t+="e")),(n=y.exec(t))&&h.test(n[1])&&(t=n[1]+"i"),(n=T.exec(t))&&u.test(n[1])&&(t=n[1]+r[n[2]]),(n=S.exec(t))&&u.test(n[1])&&(t=n[1]+i[n[2]]),(n=k.exec(t))?f.test(n[1])&&(t=n[1]):(n=m.exec(t))&&f.test(n[1])&&(t=n[1]),(n=p.exec(t))&&(f.test(n[1])||c.test(n[1])&&!l.test(n[1]))&&(t=n[1]),d.test(t)&&f.test(t)&&(t=t.substr(0,t.length-1)),e&&(t="y"+t.substr(1)),t)};var r={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},i={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},o="[aeiouy]",s="([^aeiou][^aeiouy]*)",a="("+o+"[aeiou]*)",u=new RegExp("^"+s+"?"+a+s),c=new RegExp("^"+s+"?"+a+s+a+"?$"),f=new RegExp("^"+s+"?("+a+s+"){2,}"),h=new RegExp("^"+s+"?"+o),l=new RegExp("^"+s+o+"[^aeiouwxy]$"),d=/ll$/,p=/^(.+?)e$/,y=/^(.+?)y$/,m=/^(.+?(s|t))(ion)$/,g=/^(.+?)(ed|ing)$/,v=/(at|bl|iz)$/,w=/^(.+?)eed$/,b=/^.+?[^s]s$/,I=/^.+?(ss|i)es$/,x=/([^aeiouylsz])\1$/,T=new RegExp("^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$"),S=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,k=new RegExp("^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$")},,function(t,e,n){var r=this&&this.B||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"u",{value:!0});var i=n(1),o=n(0),s=n(3),a=(u.prototype.connect=function(t){t()},u.prototype.setID=function(t){this.U=t},u.prototype.makeTable=function(t,e){var n=this;this.W[t]={},this.Y[t]=new s.DatabaseIndex,e.forEach(function(e){if(e.props&&o.intersect(["pk","pk()"],e.props)&&(n.Y[t].pkType=e.type,n.Q[t]=e.key,e.props&&o.intersect(["ai","ai()"],e.props)&&("int"===e.type||"number"===e.type)&&(n.Y[t].doAI=!0),(e.props&&o.intersect(["ns","ns()"],e.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n.Y[t].pkType))&&(n.Y[t].sortIndex=!1),n.X)){var r=localStorage.getItem(n.U+"*"+t+"_idx");r&&n.Y[t].set(JSON.parse(r))}})},u.prototype.write=function(t,e,n,i,s){var a,u;if(e=e||o.generateID(this.Y[t].pkType,this.Y[t].ai))if(-1===this.Y[t].indexOf(e)&&(this.Y[t].add(e),this.X&&localStorage.setItem(this.U+"*"+t+"_idx",JSON.stringify(this.Y[t].keys()))),this.X){var c=r({},n,((a={})[this.Q[t]]=e,a));localStorage.setItem(this.U+"*"+t+"__"+e,JSON.stringify(c)),i(c)}else c=r({},n,((u={})[this.Q[t]]=e,u)),this.W[t][e]=o.deepFreeze(c),i(c);else s(new Error("nSQL: Can't add a row without a primary key!"))},u.prototype.delete=function(t,e,n){-1!==this.Y[t].indexOf(e)&&(this.Y[t].remove(e),this.X&&localStorage.setItem(this.U+"*"+t+"_idx",JSON.stringify(this.Y[t].keys()))),this.X?localStorage.removeItem(this.U+"*"+t+"__"+e):delete this.W[t][e],n()},u.prototype.read=function(t,e,n){if(this.X){var r=localStorage.getItem(this.U+"*"+t+"__"+e);n(r?JSON.parse(r):void 0)}else n(this.W[t][e])},u.prototype.rangeRead=function(t,e,n,r,o,s){var a=this,u=this.Y[t].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[0,u.length-1];if(u.length){function h(){l++,++d%500==0?i.setFast(p):p()}s&&c||!1!==this.Y[t].sortIndex||(u=u.sort()),s&&c&&(f=f.map(function(e){var n=a.Y[t].indexOf(e);return-1!==n?n:a.Y[t].getLocation(e)}));var l=f[0],d=0,p=function(){if(l<=f[1])if(a.X){var r=localStorage.getItem(a.U+"*"+t+"__"+u[l]);e(r?JSON.parse(r):void 0,l,h)}else e(a.W[t][u[l]],l,h);else n()};p()}else n()},u.prototype.drop=function(t,e){var n=this;this.X?(localStorage.setItem(this.U+"*"+t+"_idx",JSON.stringify([])),this.Y[t].keys().forEach(function(e){localStorage.removeItem(n.U+"*"+t+"__"+e)})):this.W[t]={},this.Y[t]=this.Y[t].clone(),e()},u.prototype.getIndex=function(t,e,n){n(e?this.Y[t].keys().length:this.Y[t].keys())},u.prototype.destroy=function(t){var e=this;o.fastALL(Object.keys(this.Y),function(t,n,r){e.drop(t,r)}).then(t)},u.prototype.setNSQL=function(t){s.syncPeerIndex(t,this.Y)},u);function u(t){this.Q={},this.W={},this.Y={},this.X=t||!1}e.G=a},function(t,e,n){var r=this&&this.B||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"u",{value:!0});var i=n(1),o=n(0),s=n(3),a=(u.prototype.onError=function(t){throw console.error(t),new Error("nSQL: IndexedDB Error!")},u.prototype.connect=function(t){var e=this;this.q=o.hash(JSON.stringify(this.V));var n=1;this.version?n=this.version:(n=parseInt(localStorage.getItem(this.U+"-idb-version")||"")||1,(localStorage.getItem(this.U+"-idb-hash")||this.q)!==this.q&&n++,localStorage.setItem(this.U+"-idb-version",String(n)),localStorage.setItem(this.U+"-idb-hash",this.q));var r=indexedDB.open(this.U,n),i={};r.onerror=this.onError,r.onupgradeneeded=function(t){e.Z=t.target.result,Object.keys(e.Y).forEach(function(t){e.Z.objectStoreNames.contains(t)||e.Z.createObjectStore(t,{keyPath:e.Q[t]}),i[t]=[]})},r.onsuccess=function(n){e.Z=n.target.result,o.fastALL(Object.keys(e.Y),function(t,n,r){!function(t,n){var r=[];e.store(t,"readonly",function(t,i){var o=i.openCursor();o.onsuccess=function(t){var e=t.target.result;e&&(r.push(e.key),e.continue())},o.onerror=e.onError,t.oncomplete=function(){n(r)}})}(t,function(n){e.Y[t].set(n),r()})}).then(function(){t()})}},u.prototype.store=function(t,e,n){var r=this.Z.transaction(t,e);r.onabort=this.onError,r.onerror=this.onError,n(r,r.objectStore(t))},u.prototype.setID=function(t){this.U=t},u.prototype.makeTable=function(t,e){var n=this;this.Y[t]=new s.DatabaseIndex,(this.V[t]=e).forEach(function(e){e.props&&o.intersect(["pk","pk()"],e.props)&&(n.Y[t].pkType=e.type,n.Q[t]=e.key,e.props&&o.intersect(["ai","ai()"],e.props)&&("int"===e.type||"number"===e.type)&&(n.Y[t].doAI=!0),(e.props&&o.intersect(["ns","ns()"],e.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n.Y[t].pkType))&&(n.Y[t].sortIndex=!1))})},u.prototype.write=function(t,e,n,i,s){var a;if(e=e||o.generateID(this.Y[t].pkType,this.Y[t].ai)){-1===this.Y[t].indexOf(e)&&this.Y[t].add(e);var u=r({},n,((a={})[this.Q[t]]=e,a));this.store(t,"readwrite",function(t,e){try{e.put(u).onsuccess=function(){i(u)}}catch(t){console.error(t),s(t)}})}else s(new Error("nSQL: Can't add a row without a primary key!"))},u.prototype.delete=function(t,e,n){var r=this;-1!==this.Y[t].indexOf(e)&&this.Y[t].remove(e),this.store(t,"readwrite",function(t,i){var o="_clear_"===e?i.clear():i.delete(e);o.onerror=r.onError,o.onsuccess=function(t){n()}})},u.prototype.read=function(t,e,n){var r=this;-1!==this.Y[t].indexOf(e)?this.store(t,"readonly",function(t,i){var o=i.get(e);o.onerror=r.onError,o.onsuccess=function(){n(o.result)}}):n(null)},u.prototype.rangeRead=function(t,e,n,r,o,s){var a=this,u=this.Y[t].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[0,u.length-1];if(u.length){function h(){l++,++d%500==0?i.setFast(p):p()}s&&c||!1!==this.Y[t].sortIndex||(u=u.sort()),s&&c&&(f=f.map(function(e){var n=a.Y[t].indexOf(e);return-1!==n?n:a.Y[t].getLocation(e)}));var l=f[0],d=0,p=function(){l<=f[1]?a.read(t,u[l],function(t){e(t,l,h)}):n()};p()}else n()},u.prototype.drop=function(t,e){this.Y[t]=this.Y[t].clone(),this.delete(t,"_clear_",function(){e()})},u.prototype.getIndex=function(t,e,n){n(e?this.Y[t].keys().length:this.Y[t].keys())},u.prototype.destroy=function(t){var e=this;localStorage.removeItem(this.U+"-idb-version"),localStorage.removeItem(this.U+"-idb-hash"),o.fastALL(Object.keys(this.Y),function(t,n,r){e.drop(t,r)}).then(t)},u.prototype.setNSQL=function(t){s.syncPeerIndex(t,this.Y)},u);function u(t){this.version=t,this.Q={},this.Y={},this.V={}}e.tt=a},function(t,e,n){var r=this&&this.B||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"u",{value:!0});var i=n(1),o=n(0),s=n(3),a=(u.prototype.setID=function(t){this.U=t},u.prototype.connect=function(t){var e=this;this.Z=window.openDatabase(this.U,"1.0",this.U,this.nt||o.isAndroid?5e6:1),o.fastALL(Object.keys(this.Q),function(t,n,r){e.it(!0,'CREATE TABLE IF NOT EXISTS "'+t+'" (id '+(e.et[t]?"REAL":"TEXT")+" PRIMARY KEY UNIQUE, data TEXT)",[],function(){e.it(!1,'SELECT id FROM "'+t+'"',[],function(n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).id);e.Y[t].sortIndex&&(i=i.sort(function(t,e){return e<t?1:-1})),e.Y[t].set(i),r()})})}).then(t)},u.prototype.rt=function(t){if(-1===Object.keys(this.Q).indexOf(t))throw Error("No table "+t+" found!");return'"'+t+'"'},u.prototype.makeTable=function(t,e){var n=this;this.Y[t]=new s.DatabaseIndex,e.forEach(function(e){e.props&&o.intersect(["pk","pk()"],e.props)&&(n.Y[t].pkType=e.type,n.Q[t]=e.key,e.props&&o.intersect(["ai","ai()"],e.props)&&("int"===e.type||"number"===e.type)&&(n.Y[t].doAI=!0),-1!==["number","float","int"].indexOf(n.Y[t].pkType)&&(n.et[t]=!0),(e.props&&o.intersect(["ns","ns()"],e.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n.Y[t].pkType))&&(n.Y[t].sortIndex=!1))})},u.prototype.it=function(t,e,n,r){function i(t){t.executeSql(e,n,function(t,e){r(e)},function(t,r){return console.error(e,n,r),!1})}t?this.Z.transaction(i):this.Z.readTransaction(i)},u.prototype.write=function(t,e,n,i,s){var a=this;(e=e||o.generateID(this.Y[t].pkType,this.Y[t].ai))?this.it(!1,"SELECT id FROM "+this.rt(t)+" WHERE id = ?",[e],function(o){var s,u;if(o.rows.length){var c=r({},n,((u={})[a.Q[t]]=e,u));a.it(!0,"UPDATE "+a.rt(t)+" SET data = ? WHERE id = ?",[JSON.stringify(c),e],function(){i(c)})}else{a.Y[t].add(e);var f=r({},n,((s={})[a.Q[t]]=e,s));a.it(!0,"INSERT into "+a.rt(t)+" (id, data) VALUES (?, ?)",[e,JSON.stringify(f)],function(t){i(f)})}}):s(new Error("nSQL: Can't add a row without a primary key!"))},u.prototype.delete=function(t,e,n){-1!==this.Y[t].indexOf(e)&&this.Y[t].remove(e),this.it(!0,"DELETE FROM "+this.rt(t)+" WHERE id = ?",[e],function(){n()})},u.prototype.read=function(t,e,n){this.it(!1,"SELECT data FROM "+this.rt(t)+" WHERE id = ?",[e],function(t){t.rows.length?n(JSON.parse(t.rows.item(0).data)):n(void 0)})},u.prototype.batchRead=function(t,e,n){var r=this,i=o.splitArr(e,500),s=[];o.fastCHAIN(i,function(e,n,i){r.it(!1,"SELECT data from "+r.rt(t)+" WHERE id IN ("+e.map(function(t){return"?"}).join(", ")+") ORDER BY id",e,function(t){for(var e=t.rows.length;e--;)s.unshift(JSON.parse(t.rows.item(e).data));i()})}).then(function(){n(s)})},u.prototype.rangeRead=function(t,e,n,r,o,s){var a=this,u=this.Y[t].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[];if(u.length){s&&c&&(f=f.map(function(e){return a.Y[t].getLocation(e)})),s&&c||!1!==this.Y[t].sortIndex||(u=u.sort());var h=f[0]||0,l=[],d=f[0],p="SELECT data from "+this.rt(t);if(f.length)for(u[d];d<=f[1];)l.push(u[d]),d++;p+=" ORDER BY id",l.length?this.batchRead(t,l,function(t){var r=0,o=function(){t.length>r?e(t[r],h,function(){h++,++r%500==0?i.setFast(o):o()}):n()};o()}):this.it(!1,p,l,function(t){var r=0,o=function(){t.rows.length>r?e(JSON.parse(t.rows.item(r).data),h,function(){h++,++r%500==0?i.setFast(o):o()}):n()};o()})}else n()},u.prototype.drop=function(t,e){this.Y[t]=this.Y[t].clone(),this.it(!0,"DELETE FROM "+this.rt(t),[],function(t){e()})},u.prototype.getIndex=function(t,e,n){n(e?this.Y[t].keys().length:this.Y[t].keys())},u.prototype.destroy=function(t){var e=this;o.fastALL(Object.keys(this.Y),function(t,n,r){e.drop(t,r)}).then(t)},u.prototype.setNSQL=function(t){s.syncPeerIndex(t,this.Y)},u);function u(t){this.Q={},this.Y={},this.et={},this.nt=1e3*(t||0)*1e3}e.ot=a},,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(26)},function(t,e,n){Object.defineProperty(e,"u",{value:!0});var r=n(27),i=n(8),o=n(7),s=n(9);n(0).fastCHAIN([i.tt,o.G,s.ot],function(t,e,n){switch(e){case 0:console.log("Testing IndexedDB...");break;case 1:console.log(""),console.log("Testing Sync Store...");break;case 2:console.log(""),console.log("Testing WebSQL...")}new r.TestAdapter(t,[]),setTimeout(n,3e3)}).then(function(){console.log("TESTS COMPLETE")})},function(t,e,n){(function(t){Object.defineProperty(e,"u",{value:!0});var r=n(29),i=n(30),o=n(31),s=(a.prototype.Deletes=function(){var t,e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args))),n=[];return new r.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new r.Promise(function(t,r){for(var i=[],s=0;s<100;s++)n.push({id:s+1,name:"Title "+(s+1)}),i.push("Title "+(s+1));o.fastCHAIN(i,function(t,n,r){e.write("test",null,{name:t},r)}).then(t)})}).then(function(){return new r.Promise(function(t,r){e.delete("test",3,function(){var o=[];e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){var e=i.equals(o,n.filter(function(t){return 3!==t.id}));i.myConsole.assert(e,"Delete Test"),e?t():r(o)},void 0,void 0)})})}).then(function(){return new r.Promise(function(t,n){e.destroy(t)})})},a.prototype.RangeReads=function(){var t,e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args))),n=[],s=[];return new r.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new r.Promise(function(t,r){for(var i=[],a=0;a<100;a++)n.push({id:a+1,name:"Title "+(a+1)}),i.push("Title "+(a+1)),s.push(a+1);o.fastCHAIN(i,function(t,n,r){e.write("test",null,{name:t},r)}).then(t)})}).then(function(){return new r.Promise(function(t,r){if(e.batchRead){var o=[10,11,12,20];e.batchRead("test",o,function(e){var s=i.equals(e.sort(function(t,e){return t.id>e.id?1:-1}),n.filter(function(t){return-1!==o.indexOf(t.id)}));i.myConsole.assert(s,"Select Batch Rows"),s?t():r(e)})}else t()})}).then(function(){return new r.Promise(function(t,r){var o=[];e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){var e=i.equals(o,n.filter(function(t){return 10<t.id&&t.id<22}));i.myConsole.assert(e,"Select Range Test"),e?t():r(o)},10,20)})}).then(function(){return new r.Promise(function(t,r){var o=[];e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){var e=i.equals(o,n.filter(function(t){return 9<t.id&&t.id<21}));i.myConsole.assert(e,"Select Range Test (Primary Key)"),e?t():r({g:o,e:n.filter(function(t){return 9<t.id&&t.id<21})})},10,20,!0)})}).then(function(){return new r.Promise(function(t,r){var o=[];console.time("READ"),e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){console.timeEnd("READ");var e=i.equals(o,n);i.myConsole.assert(e,"Select Entire Table Test"),e?t():r({e:n,g:o})},void 0,void 0)})}).then(function(){return new r.Promise(function(t,n){e.getIndex("test",!1,function(e){var r=i.equals(e,s);i.myConsole.assert(r,"Select Index Test"),r?t():n({e:s,g:e})})})}).then(function(){return new r.Promise(function(t,n){e.getIndex("test",!0,function(e){var r=100===e;i.myConsole.assert(r,"Select Index Length Test"),r?t():n(e)})})}).then(function(){return new r.Promise(function(t,n){e.destroy(t)})})},a.prototype.RangeReadsUUID=function(){var t,e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args))),n=[],s=[];return new r.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"uuid",props:["ai","pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new r.Promise(function(t,r){for(var i=[],a=0;a<100;a++){var u=o.uuid();n.push({id:u,name:"Title "+u}),i.push("Title "+u),s.push(u)}s.sort(function(t,e){return e<t?1:-1}),n.sort(function(t,e){return t.id>e.id?1:-1}),o.fastCHAIN(n,function(t,n,r){e.write("test",t.id,t,r)}).then(t)})}).then(function(){return new r.Promise(function(t,r){if(e.batchRead){for(var o=[],s=0;s<5;s++)o.push(n[Math.floor(Math.random()*n.length)].id);o=o.filter(function(t,e,n){return n.indexOf(t)===e}),e.batchRead("test",o,function(e){var s=i.equals(e,n.filter(function(t){return-1!==o.indexOf(t.id)}));i.myConsole.assert(s,"Select Batch Rows"),s?t():r({e:n.filter(function(t){return-1!==o.indexOf(t.id)}),g:e})})}else t()})}).then(function(){return new r.Promise(function(t,r){var o=[];e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){var e=i.equals(o,n.filter(function(t,e){return 9<e&&e<21}));i.myConsole.assert(e,"Select Range Test"),e?t():r({g:o,e:n.filter(function(t,e){return 9<e&&e<21})})},10,20)})}).then(function(){return new r.Promise(function(t,r){var o=[];e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){var e=i.equals(o,n.filter(function(t){return t.id>=n[10].id&&t.id<=n[20].id}));i.myConsole.assert(e,"Select Range Test (Primary Key)"),e?t():r({g:o,e:n.filter(function(t){return t.id>=n[10].id&&t.id<=n[20].id})})},n[10].id,n[20].id,!0)})}).then(function(){return new r.Promise(function(t,r){var o=[];console.time("READ"),e.rangeRead("test",function(t,e,n){o.push(t),n()},function(){console.timeEnd("READ");var e=i.equals(o,n);i.myConsole.assert(e,"Select Entire Table Test"),e?t():r(o)},void 0,void 0)})}).then(function(){return new r.Promise(function(t,n){e.getIndex("test",!1,function(e){var r=i.equals(e,s);i.myConsole.assert(r,"Select Index Test"),r?t():n({e:s,g:e})})})}).then(function(){return new r.Promise(function(t,n){e.getIndex("test",!0,function(e){var r=100===e;i.myConsole.assert(r,"Select Index Length Test"),r?t():n(e)})})}).then(function(){return new r.Promise(function(t,n){e.destroy(t)})})},a.prototype.Writes=function(){var t,e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args)));return new r.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"},{key:"posts",type:"string[]"}]),e.connect(t)}).then(function(){return new r.Promise(function(t,n){e.write("test",null,{name:"Test",posts:[1,2]},function(r){e.read("test",r.id,function(e){var r=i.equals(e,{name:"Test",id:1,posts:[1,2]});i.myConsole.assert(r,"Insert Test"),r?t():n(e)})})})}).then(function(){return new r.Promise(function(t,n){e.write("test",1,{name:"Testing",posts:[1,2]},function(r){e.read("test",r.id,function(e){var r=i.equals(e,{name:"Testing",id:1,posts:[1,2]});i.myConsole.assert(r,"Update Test"),r?t():n(e)})})})}).then(function(){return new r.Promise(function(t,n){e.write("test",1,{name:"Testing"},function(r){e.read("test",r.id,function(e){var r=i.equals(e,{name:"Testing",id:1});i.myConsole.assert(r,"Replace Test"),r?t():n(e)})})})}).then(function(){return new r.Promise(function(t,n){e.destroy(t)})})},a.prototype.PrimaryKeys=function(){var t,e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args)));return new r.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.makeTable("test2",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test3",[{key:"id",type:"timeId",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test4",[{key:"id",type:"timeIdms",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test5",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new r.Promise(function(t,n){e.write("test",null,{name:"Test"},function(e){var r=i.equals(e,{name:"Test",id:1});i.myConsole.assert(r,"Test Auto Incriment Integer."),r?t():n(e)})})}).then(function(){return new r.Promise(function(t,n){e.write("test2",null,{name:"Test"},function(e){var r=e.id.match(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/);i.myConsole.assert(r,"Test UUID."),r?t():n(e.id)})})}).then(function(){return new r.Promise(function(t,n){e.write("test3",null,{name:"Test"},function(e){var r=e.id.match(/^\w{10}-\w{1,5}$/);i.myConsole.assert(r,"Test timeId."),r?t():n(e.id)})})}).then(function(){return new r.Promise(function(t,n){e.write("test4",null,{name:"Test"},function(e){var r=e.id.match(/^\w{13}-\w{1,5}$/);i.myConsole.assert(r,"Test timeIdms."),r?t():n(e.id)})})}).then(function(){return new r.Promise(function(t,n){for(var r=[],s=0;s<20;s++)r.push(o.uuid());o.fastCHAIN(r,function(t,n,r){e.write("test5",t,{name:"Test"},r)}).then(function(){r.sort();var o=[];e.rangeRead("test5",function(t,e,n){o.push(t.id),n()},function(){var e=i.equals(o,r);i.myConsole.assert(e,"Test Sorted Primary Keys."),e?t():n({e:r,g:o})},void 0,void 0)})})}).then(function(){return new r.Promise(function(t,n){e.destroy(t)})})},a);function a(e,n){var i=this;this.adapter=e,this.args=n,new r.Promise(function(t,e){var n=new((r=i.adapter).bind.apply(r,[void 0].concat(i.args)));n.setID("123");var r,o=[{key:"id",type:"int",props:["pk","ai"]}];n.makeTable("test",o),n.makeTable("test2",o),n.makeTable("test3",o),n.makeTable("test4",o),n.makeTable("test5",o),n.connect(function(){n.destroy(t)})}).then(function(){return i.PrimaryKeys()}).then(function(){return console.log("✓ Primary Key Tests Passed"),i.Writes()}).then(function(){return console.log("✓ Write Tests Passed"),i.RangeReads()}).then(function(){return console.log("✓ Range Read Tests Passed (number)"),i.RangeReadsUUID()}).then(function(){return console.log("✓ Range Read Tests Passed (uuid)"),i.Deletes()}).then(function(){console.log("✓ Delete Tests Passed"),console.log("✓ All Tests Passed!******"),t.exit()}).catch(function(e){t.exit(),console.error("Test Failed",e)})}e.TestAdapter=s}).call(this,n(28))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!f){var t=a(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";(function(t){function n(t){return t[0].apply(null,o.call(t,1))}Object.defineProperty(e,"u",{value:!0});var r=0,i={},o=Array.prototype.slice,s="undefined"!=typeof window&&window.setImmediate?window.setImmediate:!(void 0===t||!t.setImmediate)&&t.setImmediate,a="undefined"!=typeof window&&window.postMessage&&window.addEventListener;function u(){}a&&window.addEventListener("message",function(t){var e,r=t.data;"string"==typeof r&&0===r.indexOf("setMsg")&&(e=i[r])&&(delete i[r],n(e))}),e.setFast=s?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s(function(){n(t)})}:a?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r++,o="setMsg"+n;return i[o]=t,window.postMessage(o,"*"),n}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];setTimeout(function(){n(t)},0)};var c=["R"],f=["F"],h=["P"],l=(d.doPolyFill=function(){void 0!==t&&(t.Promise||(t.Promise=this)),"undefined"!=typeof window&&(window.Promise||(window.Promise=this))},d.prototype.catch=function(t){return this.then(function(){},t)},d.prototype.then=function(t,e){if("function"!=typeof t&&this.M===f||"function"!=typeof e&&this.M===c)return this;var n=new d(u);return this.M!==h?m(n,this.M===f?t:e,this.k):this.j.push(new p(n,t,e)),n},d.resolve=function(t){return t instanceof this?t:g.I(new d(u),t)},d.reject=function(t){return g._(new d(u),t)},d.all=function(t){return new d(function(e,n){var r=[];if(t.length)for(var i=function(n,i,o){void 0!==o?r.push(o):r.push(i),r.length==t.length&&e(r)},o=0;o<t.length;o++)t[o].then(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i(0,t,void 0)}).catch(function(t){i(0,void 0,t)});else e([])})},d.race=function(t){var e,n=t.length,r=!1,i=-1,o=new d(u);if(!1!==Array.isArray(t))return this.reject(new TypeError);if(!n)return this.resolve([]);for(;++i<n;)e=t[i],this.resolve(e).then(function(t){r||(r=!0,g.I(o,t))},function(t){r||(r=!0,g._(o,t))});return o},d);function d(t){this.M=h,this.j=[],this.k=void 0,t!==u&&b(this,t)}e.Promise=l;var p=(y.prototype.R=function(t){g.I(this.N,t)},y.prototype.P=function(t){m(this.N,this.A,t)},y.prototype.x=function(t){g._(this.N,t)},y.prototype.F=function(t){m(this.N,this.D,t)},y);function y(t,e,n){this.N=t,"function"==typeof e&&(this.A=e,this.R=this.P),"function"==typeof n&&(this.D=n,this.x=this.F)}function m(t,n,r){e.setFast(function(){var e;try{e=n.apply(null,r)}catch(e){return g._(t,e)}return e===t?g._(t,new TypeError):g.I(t,e),null})}e.J=p;var g=(v.I=function(t,e){var n=I(w,e),r=n.$,i=-1,o=t.j.length;if("error"===n.L)return v._(t,n.$);if(r)b(t,r);else for(t.M=f,t.k=e;++i<o;)t.j[i].R(e);return t},v._=function(t,e){t.M=c,t.k=e;for(var n=-1,r=t.j.length;++n<r;)t.j[n].x(e);return t},v);function v(){}function w(t){var e=t&&t.then;return!t||"object"!=typeof t&&"function"!=typeof t||"function"!=typeof e?null:function(){e.apply(t,arguments)}}function b(t,e){var n=!1;function r(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n||(n=!0,g._(t,e))}function i(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n||(n=!0,g.I(t,e))}var o=I(function(){e(i,r)});"error"===o.L&&r(o.$)}function I(t,e){var n={L:null,$:null};try{n.$=t(e),n.L="success"}catch(t){n.L="error",n.$=t}return n}}).call(this,n(2))},function(t,e){Object.defineProperty(e,"u",{value:!0}),e.myConsole=Object.create(console,{assert:{value:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("undefined"==typeof window)try{console.assert.apply(console,[t,e].concat(n))}catch(t){console.error(t.stack)}else console.assert.apply(console,[t,e].concat(n))},configurable:!0,enumerable:!0,writable:!0}}),e.equals=function(t,e){var n=function(t,e){var r,i,o,s,a;if((r=toString.call(t))!==toString.call(e))return!1;switch(r){default:return t.valueOf()===e.valueOf();case"[object Number]":return e=+e,(t=+t)?t===e:t==t?1/t==1/e:e!=e;case"[object RegExp]":return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex;case"[object Function]":return!1;case"[object Array]":if((i=t.length)!==e.length)return!1;for(;i--;)if(!((s=t[i])===(a=e[i])&&0!==s||n(s,a)))return!1;return!0;case"[object Object]":for(o in i=0,t)if(t.hasOwnProperty(o)){if(++i,(s=t[o])===(a=e[o])&&0!==s||n(s,a))continue;return!1}for(o in e)if(e.hasOwnProperty(o)&&--i<0)return!1;return!0}};return t===e&&0!==t||n(t,e)}},function(t,e,n){(function(t){Object.defineProperty(e,"u",{value:!0});var r=n(4),i=n(5);n(1).Promise.doPolyFill(),e.stopWords=["a","about","after","all","also","am","an","and","andor","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","had","has","have","he","her","here","him","himself","his","how","i","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your"],e.f=function(t){return t?JSON.parse(JSON.stringify(t)):null},e.fastCHAIN=function(t,n){return new Promise(function(r,i){if(t&&t.length){var o=[],s=!1,a=function(){if(o.length<t.length)n(t[o.length],o.length,function(t){o.push(t),o.length%100==0?e.setFast(a):a()},function(t){s=!0,i(t)});else{if(s)return;r(o)}};a()}else r([])})},e.fastRACE=function(t,e){return new Promise(function(n,r){if(t&&t.length){var i=!1,o=0,s=function(){o<t.length&&(e(t[o],o,function(t){i||(i=!0,n([t]))},function(t){i||(i=!0,r(t))}),o++,s())};s()}else n([])})},e.fastALL=function(t,e){return Promise.all((t||[]).map(function(t,n){return new Promise(function(r,i){e(t,n,r,i)})}))};var o="undefined"==typeof window?"":navigator.userAgent||"";e.isSafari=0!==o.length&&(/^((?!chrome|android).)*safari/i.test(o)||/iPad|iPhone|iPod/.test(o)&&!window.MSStream),e.isMSBrowser=0!==o.length&&(0<o.indexOf("MSIE ")||0<o.indexOf("Trident/")||0<o.indexOf("Edge/")),e.isAndroid=/Android/.test(o),e.random16Bits=function(){if("undefined"==typeof crypto)return Math.round(Math.random()*Math.pow(2,16));if(crypto.getRandomValues){var e=new Uint16Array(1);return crypto.getRandomValues(e),e[0]}return void 0!==t&&t.a.randomBytes?t.a.randomBytes(2).reduce(function(t,e){return e*t}):Math.round(Math.random()*Math.pow(2,16))},e.tokenizer=function(t,n,o,s,a){function u(t){return!t||1===String(t).length||-1!==e.stopWords.indexOf(t)}var c=(s||"").toLowerCase().replace(/(\d+)\/(\d+)|(?:\d+(?:,\d+)*|\d+)(?:\.\d+)?/gim,function(t,e,n){return e||n?(parseInt(e)/parseInt(n)).toFixed(a||4):parseFloat(t.replace(/\,/gim,"")).toFixed(a||4)}).replace(/\-|\_|\[|\]|\(|\)|\{|\}|\r?\n|\r|\t/gim," ").replace(/[^\w\s]|(\d\.)/gim,"$1").replace(/\s+/g," ").split(" ");switch(o[1]){case"english":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":r(i(t)):t}});case"english-stem":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":i(t):t}});case"english-meta":return c.map(function(t,e){return{i:e,o:t,w:isNaN(t)?u(t)?"":r(t):t}})}return c.map(function(t,e){return{o:t,w:t,i:e}})},e.timeid=function(t){for(var n=Math.round((new Date).getTime()/(t?1:1e3)).toString();n.length<(t?13:10);)n="0"+n;return n+"-"+(e.random16Bits()+e.random16Bits()).toString(16)},e.intersect=function(t,e){return!(!t||!e)&&!(!t.length||!e.length)&&0<(t||[]).filter(function(t){return-1!==(e||[]).indexOf(t)}).length},e.uuid=function(){var t,n,r="";return[r,r,r,r,r,r,r,r].reduce(function(i,o,s){for(t=e.random16Bits(),n=3===s?4:4===s?(t%16&3|8).toString(16):r,t=t.toString(16);t.length<4;)t="0"+t;return i+(-1<[2,3,4,5].indexOf(s)?"-":r)+(n+t).slice(0,4)},r)},e.hash=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString(16)};var s={int:function(t){return t},uuid:e.uuid,timeId:function(){return e.timeid()},timeIdms:function(){return e.timeid(!0)}};e.generateID=function(t,e){return s[t]?s[t](e||1):""},e.cleanArgs=function(t,n){for(var r={},i=t.length;i--;){var o=t[i].split(":");1<o.length?r[o[0]]=e.cast(o[1],n[o[0]]||void 0):r[o[0]]=n[o[0]]||void 0}return r},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.cast=function(t,n){if("any"===t||"blob"===t)return n;var r=typeof n;if("undefined"==r||null===n)return n;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},o=function(t,n){switch(t){case"safestr":return o("string",n).replace(/[&<>"'`=\/]/gim,function(t){return i[t]});case"int":return"number"!=r||n%1!=0?parseInt(n||0):n;case"number":case"float":return"number"!=r?parseFloat(n||0):n;case"any[]":case"array":return Array.isArray(n)?n:[];case"uuid":case"timeId":case"timeIdms":case"string":return"string"!=r?String(n):n;case"object":case"obj":case"map":return e.isObject(n)?n:{};case"boolean":case"bool":return!0===n}return n},s=o(String(t||"").toLowerCase(),n);if(-1===t.indexOf("[]"))return void 0!==s?-1<["int","float","number"].indexOf(t)&&isNaN(s)?0:s:void 0;var a=t.slice(0,t.lastIndexOf("[]"));return(n||[]).map(function(t){return e.cast(a,t)})},e.binarySearch=function(t,n,r,i){var o=r||0,s=i||t.length;if(t[o]>n)return o;if(t[s]<n)return s+1;var a=Math.floor((o+s)/2);return n===t[a]?a:s-1===o?s:n>t[a]?e.binarySearch(t,n,a,s):n<t[a]?e.binarySearch(t,n,o,a):s},e.removeDuplicates=function(t){if(!t.length)return[];for(var e=[t[0]],n=1;n<t.length;n++)t[n]!==t[n-1]&&e.push(t[n]);return e},e.deepFreeze=function(t){return Object.getOwnPropertyNames(t||{}).forEach(function(n){var r=t[n];"object"==typeof r&&null!==r&&(t[n]=e.deepFreeze(r))}),Object.freeze(t)},e.crowDistance=function(t,e,n,r,i){function o(t){return t*(Math.PI/180)}void 0===i&&(i=6371);var s=o(n-t),a=o(r-e),u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o(t))*Math.cos(o(n))*Math.sin(a/2)*Math.sin(a/2);return i*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))};var a={};function u(t){return t[0].apply(null,h.call(t,1))}e.objQuery=function(t,e,n){var r=function(t,e,n){return t[e]&&n?r(t,e+1,n[t[e]]):n},i=t+(n?"1":"0");if(a[i])return r(a[i],0,e);var o=[];if(o=-1<t.indexOf("[")?[].concat.apply([],t.split(".").map(function(t){return t.match(/([^\[]+)|\[([^\]]+)\]\[/gim)||t})).map(function(t){return t.replace(/\[|\]/gim,"")}):t.split("."),n){var s=o.shift()+"."+o.shift();o.unshift(s)}return a[i]=o,r(a[i],0,e)};var c=0,f={},h=Array.prototype.slice,l="undefined"!=typeof window&&window.postMessage&&window.addEventListener;l&&window.addEventListener("message",function(t){var e,n=t.data;"string"==typeof n&&0===n.indexOf("setMsg")&&(e=f[n])&&(delete f[n],u(e))}),e.setFast=l?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=c++,r="setMsg"+n;return f[r]=t,window.postMessage(r,"*"),n}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];setTimeout(function(){u(t)},0)}}).call(this,n(2))}],t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.u)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.u?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=25);function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e,n});